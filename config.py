from dataclasses import dataclass


@dataclass
class ChuaParams:
	"""蔡氏电路参数配置类。
	
	集中管理所有系统参数、数值控制参数和实验设置参数。
	使用 dataclass 自动生成初始化方法，便于参数传递和修改。
	"""
	
	# ========== 系统参数（对应论文中式(4)-(5)的无量纲参数）==========
	alpha: float = 10.0
	"""参数 α：控制 x 和 y 之间的耦合强度"""
	
	beta: float = 14.87
	"""参数 β：控制 y 对 z 的影响强度"""
	
	rho: float = 0.0
	"""参数 ρ：z 的衰减系数（通常为 0）"""
	
	m0: float = -1.143
	"""分段线性函数在 |x| < 1 区域的斜率"""
	
	m1: float = -0.714
	"""分段线性函数在 |x| >= 1 区域的斜率"""

	# ========== 数值积分控制参数 ==========
	rtol: float = 1e-9
	"""相对容差：用于 SciPy solve_ivp 的相对误差控制"""
	
	atol: float = 1e-12
	"""绝对容差：用于 SciPy solve_ivp 的绝对误差控制"""
	
	method: str = "RK45"
	"""积分方法：可选 "RK45"（显式 Runge-Kutta）或 "Radau"（隐式 Radau IIA）"""
	
	max_step: float | None = None
	"""最大步长限制：传递给 solve_ivp，None 时使用默认值"""

	# ========== 输出与实验默认设置 ==========
	t_burn: float = 150.0
	"""预热时间：积分开始后丢弃的初始时间段，用于消除瞬态效应"""
	
	t_end: float = 350.0
	"""积分结束时间：总积分时长为 t_end"""
	
	dt_save: float = 0.02
	"""保存间隔：从密集输出中均匀采样时的时间步长"""

	# ========== Lyapunov 指数计算设置 ==========
	qr_dt: float = 0.5
	"""QR 重正交间隔：在变分方程积分中，每隔 qr_dt 时间进行一次 QR 重正交"""
	
	mle_total: float = 600.0
	"""MLE 总积分时间：计算最大 Lyapunov 指数时的总积分时长"""
	
	eps_smooth: float = 1e-6
	"""平滑参数：用于构造平滑雅可比矩阵，仅在 MLE 计算中使用
	采用 |x| ≈ sqrt(x² + ε²) 的平滑近似，确保在切换点附近导数连续"""

	# ========== 分岔图扫描默认设置（扫描参数 m1）==========
	bifur_param: str = "m1"
	"""分岔扫描参数名：要扫描的参数名称"""
	
	bifur_min: float = -0.84
	"""分岔扫描最小值：参数扫描范围的下界"""
	
	bifur_max: float = -0.50
	"""分岔扫描最大值：参数扫描范围的上界"""
	
	bifur_grid: int = 60
	"""分岔扫描网格数：在 [bifur_min, bifur_max] 区间内的采样点数"""
	
	bifur_starts: int = 1
	"""每个参数值的随机起始点数：用于捕获多个吸引子或提高统计可靠性"""

	# ========== 可复现性设置 ==========
	seed: int = 42
	"""随机数种子：确保所有随机数生成可复现"""

	# ========== 蒙特卡洛鲁棒性分析 ==========
	mc_samples: int = 0
	"""蒙特卡洛样本数：设置为 >0 时启用 MLE 的蒙特卡洛鲁棒性分析"""
	
	param_sigma: float = 0.02
	"""参数扰动标准差：蒙特卡洛分析中参数扰动的相对标准差"""

	# ========== 统计分析设置 ==========
	acf_max_lag: int = 500
	"""自相关函数最大滞后：计算自相关函数时的最大滞后点数"""


